{"version":3,"sources":["public/src/modules/postSelect.js"],"names":["define","components","PostSelect","pids","init","onSelect","length","get","on","togglePostSelection","$","this","disableClicksOnPosts","post","callback","newPid","attr","parseInt","index","indexOf","push","toggleClass","splice","sort","a","b","disableClicks","enableClicksOnPosts","off"],"mappings":"AAAA,aAGAA,OAAO,cAAe,cAAe,SAAUC,GAC9C,IAAIC,KAEJA,EAAWC,QAEXD,EAAWE,KAAO,SAAUC,GAC3BH,EAAWC,KAAKG,OAAS,EACzBL,EAAWM,IAAI,SAASC,GAAG,QAAS,aAAc,WACjDC,EAAoBC,EAAEC,MAAON,KAE9BO,KAID,SAASH,EAAoBI,EAAMC,GAClC,IAAIC,EAASF,EAAKG,KAAK,YAEvB,GAAIC,SAASJ,EAAKG,KAAK,cAAe,MAAQ,EAAG,CAChD,OAGD,GAAID,EAAQ,CACX,IAAIG,EAAQhB,EAAWC,KAAKgB,QAAQJ,GACpC,GAAIG,KAAW,EAAG,CACjBhB,EAAWC,KAAKiB,KAAKL,GACrBF,EAAKQ,YAAY,aAAc,UACzB,CACNnB,EAAWC,KAAKmB,OAAOJ,EAAO,GAC9BL,EAAKQ,YAAY,aAAc,OAGhC,GAAInB,EAAWC,KAAKG,OAAQ,CAC3BJ,EAAWC,KAAKoB,KAAK,SAAUC,EAAGC,GAAK,OAAOD,EAAIC,IAEnDX,KAKF,SAASY,IACR,OAAO,MAGR,SAASd,IACRX,EAAWM,IAAI,QAAQC,GAAG,QAAS,WAAYkB,GAGhDxB,EAAWyB,oBAAsB,WAChC1B,EAAWM,IAAI,QAAQqB,IAAI,QAAS,WAAYF,IAIjD,OAAOxB","file":"public/src/modules/postSelect.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('postSelect', ['components'], function (components) {\r\n\tvar PostSelect = {};\r\n\r\n\tPostSelect.pids = [];\r\n\r\n\tPostSelect.init = function (onSelect) {\r\n\t\tPostSelect.pids.length = 0;\r\n\t\tcomponents.get('topic').on('click', '[data-pid]', function () {\r\n\t\t\ttogglePostSelection($(this), onSelect);\r\n\t\t});\r\n\t\tdisableClicksOnPosts();\r\n\t};\r\n\r\n\r\n\tfunction togglePostSelection(post, callback) {\r\n\t\tvar newPid = post.attr('data-pid');\r\n\r\n\t\tif (parseInt(post.attr('data-index'), 10) === 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (newPid) {\r\n\t\t\tvar index = PostSelect.pids.indexOf(newPid);\r\n\t\t\tif (index === -1) {\r\n\t\t\t\tPostSelect.pids.push(newPid);\r\n\t\t\t\tpost.toggleClass('bg-success', true);\r\n\t\t\t} else {\r\n\t\t\t\tPostSelect.pids.splice(index, 1);\r\n\t\t\t\tpost.toggleClass('bg-success', false);\r\n\t\t\t}\r\n\r\n\t\t\tif (PostSelect.pids.length) {\r\n\t\t\t\tPostSelect.pids.sort(function (a, b) { return a - b; });\r\n\t\t\t}\r\n\t\t\tcallback();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tfunction disableClicks() {\r\n\t\treturn false;\r\n\t}\r\n\r\n\tfunction disableClicksOnPosts() {\r\n\t\tcomponents.get('post').on('click', 'button,a', disableClicks);\r\n\t}\r\n\r\n\tPostSelect.enableClicksOnPosts = function () {\r\n\t\tcomponents.get('post').off('click', 'button,a', disableClicks);\r\n\t};\r\n\r\n\r\n\treturn PostSelect;\r\n});\r\n"]}