{"version":3,"sources":["public/src/client/reset_code.js"],"names":["define","ResetCode","init","reset_code","ajaxify","data","code","resetEl","$","password","repeat","on","val","length","minimumPasswordLength","app","alertError","prop","html","socket","emit","err","refresh","message","window","location","href","config","relative_path"],"mappings":"AAAA,aAGAA,OAAO,mBAAoB,WAC1B,IAAIC,KAEJA,EAAUC,KAAO,WAChB,IAAIC,EAAaC,QAAQC,KAAKC,KAE9B,IAAIC,EAAUC,EAAE,UAChB,IAAIC,EAAWD,EAAE,aACjB,IAAIE,EAASF,EAAE,WAEfD,EAAQI,GAAG,QAAS,WACnB,GAAIF,EAASG,MAAMC,OAAST,QAAQC,KAAKS,sBAAuB,CAC/DC,IAAIC,WAAW,8CACT,GAAIP,EAASG,QAAUF,EAAOE,MAAO,CAC3CG,IAAIC,WAAW,iDACT,CACNT,EAAQU,KAAK,WAAY,MAAMC,KAAK,2DACpCC,OAAOC,KAAK,qBACXd,KAAMH,EACNM,SAAUA,EAASG,OACjB,SAAUS,GACZ,GAAIA,EAAK,CACRjB,QAAQkB,UACR,OAAOP,IAAIC,WAAWK,EAAIE,SAG3BC,OAAOC,SAASC,KAAOC,OAAOC,cAAgB,WAGhD,OAAO,SAIT,OAAO3B","file":"public/src/client/reset_code.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/reset_code', function () {\r\n\tvar\tResetCode = {};\r\n\r\n\tResetCode.init = function () {\r\n\t\tvar reset_code = ajaxify.data.code;\r\n\r\n\t\tvar resetEl = $('#reset');\r\n\t\tvar password = $('#password');\r\n\t\tvar repeat = $('#repeat');\r\n\r\n\t\tresetEl.on('click', function () {\r\n\t\t\tif (password.val().length < ajaxify.data.minimumPasswordLength) {\r\n\t\t\t\tapp.alertError('[[reset_password:password_too_short]]');\r\n\t\t\t} else if (password.val() !== repeat.val()) {\r\n\t\t\t\tapp.alertError('[[reset_password:passwords_do_not_match]]');\r\n\t\t\t} else {\r\n\t\t\t\tresetEl.prop('disabled', true).html('<i class=\"fa fa-spin fa-refresh\"></i> Changing Password');\r\n\t\t\t\tsocket.emit('user.reset.commit', {\r\n\t\t\t\t\tcode: reset_code,\r\n\t\t\t\t\tpassword: password.val(),\r\n\t\t\t\t}, function (err) {\r\n\t\t\t\t\tif (err) {\r\n\t\t\t\t\t\tajaxify.refresh();\r\n\t\t\t\t\t\treturn app.alertError(err.message);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twindow.location.href = config.relative_path + '/login';\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t});\r\n\t};\r\n\r\n\treturn ResetCode;\r\n});\r\n"]}