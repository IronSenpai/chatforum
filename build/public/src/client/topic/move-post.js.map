{"version":3,"sources":["public/src/client/topic/move-post.js"],"names":["define","MovePost","openMovePostModal","button","app","parseAndTranslate","html","moveModal","$","moveBtn","find","topicId","on","remove","showMoveModal","addClass","attr","val","movePost","parents","modal","css","Math","max","window","width","outerWidth","scrollLeft","post","pid","tid","callback","socket","emit","err","alertError","message","fadeOut","alertSuccess"],"mappings":"AAAA,aAGAA,OAAO,2BAA6B,WACnC,IAAIC,KAGJA,EAASC,kBAAoB,SAAUC,GACtCC,IAAIC,kBAAkB,8BAAgC,SAAUC,GAC/D,IAAIC,EAAYC,EAAEF,GAElB,IAAIG,EAAUF,EAAUG,KAAK,qBAC7B,IAAIC,EAAUJ,EAAUG,KAAK,YAE7BH,EAAUK,GAAG,kBAAmB,WAC/BL,EAAUM,WAGXC,EAAcP,GAEdA,EAAUG,KAAK,6BAA6BE,GAAG,QAAS,WACvDL,EAAUQ,SAAS,UAGpBJ,EAAQC,GAAG,eAAgB,WAC1BH,EAAQO,KAAK,YAAaL,EAAQM,SAGnCR,EAAQG,GAAG,QAAS,WACnBM,EAASf,EAAOgB,QAAQ,cAAehB,EAAOgB,QAAQ,cAAcH,KAAK,YAAaL,EAAQM,MAAO,WACpGV,EAAUa,MAAM,QAChBT,EAAQM,IAAI,WAMhB,SAASH,EAAcM,GACtBA,EAAMA,MAAM,QACVC,IAAI,WAAY,SAChBA,IAAI,OAAQC,KAAKC,IAAI,GAAKf,EAAEgB,QAAQC,QAAUL,EAAMM,cAAgB,EAAKlB,EAAEgB,QAAQG,cAAgB,MACnGN,IAAI,MAAO,OACXA,IAAI,UAAW,QAGlB,SAASH,EAASU,EAAMC,EAAKC,EAAKC,GACjCC,OAAOC,KAAK,kBAAoBJ,IAAKA,EAAKC,IAAKA,GAAO,SAAUI,GAC/D,GAAIA,EAAK,CACR9B,IAAI+B,WAAWD,EAAIE,SACnB,OAAOL,IAGRH,EAAKS,QAAQ,IAAK,WACjBT,EAAKf,WAGNT,IAAIkC,aAAa,wBACjBP,MAKF,OAAO9B","file":"public/src/client/topic/move-post.js","sourcesContent":["'use strict';\r\n\r\n\r\ndefine('forum/topic/move-post', [], function () {\r\n\tvar MovePost = {};\r\n\r\n\r\n\tMovePost.openMovePostModal = function (button) {\r\n\t\tapp.parseAndTranslate('partials/move_post_modal', {}, function (html) {\r\n\t\t\tvar moveModal = $(html);\r\n\r\n\t\t\tvar\tmoveBtn = moveModal.find('#move_post_commit');\r\n\t\t\tvar topicId = moveModal.find('#topicId');\r\n\r\n\t\t\tmoveModal.on('hidden.bs.modal', function () {\r\n\t\t\t\tmoveModal.remove();\r\n\t\t\t});\r\n\r\n\t\t\tshowMoveModal(moveModal);\r\n\r\n\t\t\tmoveModal.find('.close, #move_post_cancel').on('click', function () {\r\n\t\t\t\tmoveModal.addClass('hide');\r\n\t\t\t});\r\n\r\n\t\t\ttopicId.on('keyup change', function () {\r\n\t\t\t\tmoveBtn.attr('disabled', !topicId.val());\r\n\t\t\t});\r\n\r\n\t\t\tmoveBtn.on('click', function () {\r\n\t\t\t\tmovePost(button.parents('[data-pid]'), button.parents('[data-pid]').attr('data-pid'), topicId.val(), function () {\r\n\t\t\t\t\tmoveModal.modal('hide');\r\n\t\t\t\t\ttopicId.val('');\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t});\r\n\t};\r\n\r\n\tfunction showMoveModal(modal) {\r\n\t\tmodal.modal('show')\r\n\t\t\t.css('position', 'fixed')\r\n\t\t\t.css('left', Math.max(0, (($(window).width() - modal.outerWidth()) / 2) + $(window).scrollLeft()) + 'px')\r\n\t\t\t.css('top', '0px')\r\n\t\t\t.css('z-index', '2000');\r\n\t}\r\n\r\n\tfunction movePost(post, pid, tid, callback) {\r\n\t\tsocket.emit('posts.movePost', { pid: pid, tid: tid }, function (err) {\r\n\t\t\tif (err) {\r\n\t\t\t\tapp.alertError(err.message);\r\n\t\t\t\treturn callback();\r\n\t\t\t}\r\n\r\n\t\t\tpost.fadeOut(500, function () {\r\n\t\t\t\tpost.remove();\r\n\t\t\t});\r\n\r\n\t\t\tapp.alertSuccess('[[topic:post_moved]]');\r\n\t\t\tcallback();\r\n\t\t});\r\n\t}\r\n\r\n\r\n\treturn MovePost;\r\n});\r\n"]}